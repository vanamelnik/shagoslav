# Заметки

## Функционирование сервиса MeetingRoom

### Создание комнаты
Хозяин группы создает новую комнату: Контроллер создаёт новый объект `MeetingRoom`. Генерируются токены пользователя и админа и ссылки для входа.

### Работа комнаты
Пользователь идёт по ссылке входа `/room?token=xxxx`. Контролер комнаты выполняет аутентификацию:
- активна ли комната с указанным токеном
- если у пользователя нет куки с личным токеном, перенаправить на страницу регистрации нового гостя
- если гость идентифицирован, выводится страница комнаты

#### регистрация нового гостя
Пользователь вводит имя в поле формы, которая отправляется по ссылке вида `/room/signup?name=<guestName>&token=xxxx`, которую обрабатывает контроллер гостей. Проводится аутентификация токена комнаты. Если комната активна, создается новый объект `Guest` (если токен xxxx является токеном админа, то устанавливается флаг isAdmin). Генерируется remember token, который сохраняется пользователю в куки. Далее пользователь перенаправляется вновь по ссылке входа.